(this["webpackJsonpmedical-notes"]=this["webpackJsonpmedical-notes"]||[]).push([[0],{25:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(12),s=a.n(r),i=(a(25),a(4)),l=a(2),o=a(16),u=a(8),d=a(7),j=a(3),b=a(1);function O(e){var t=e.autoFocus,a=e.name,n=e.placeholder,r=e.value,s=void 0===r?"":r,i=e.onChange,l=e.type,o=Object(c.useCallback)((function(e){return i(a,e.target.value)}),[i,a]);return Object(b.jsx)("input",{value:s,onChange:o,name:a,className:"visitDetailsForm__input",placeholder:n,type:l,required:!0,autoFocus:t})}a(27);var m={DOCTORS:"/doctors",DOCTOR:"/doctor/:id",DOCTOR_FORM:"/doctor/form",DOCTOR_VISIT_FORM:"/doctor/:id/visit-form"},v="doctors",h="details";a(28);function f(e){var t=e.className,a=e.children;return Object(b.jsx)("button",{color:"primary","aria-label":"add",className:"fab ".concat(t||""),children:a})}var x=a(13),p=a.n(x),_=a(17);function g(e,t){return new Promise((function(a,c){setTimeout((function(){try{var t=e();a(t)}catch(n){c(n)}}),t)}))}var N=n.a.createContext({});function C(){var e=Object(c.useContext)(N);if(void 0===e)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430");return e}function y(e){var t=e.children,a=function(){var e=n.a.useState(!0),t=Object(j.a)(e,2),a=t[0],r=t[1],s=n.a.useState({}),i=Object(j.a)(s,2),l=i[0],o=i[1],b=n.a.useCallback((function(){var e=localStorage.getItem(h);try{o(JSON.parse(e)||{})}catch(t){o({})}r(!1)}),[]),O=n.a.useCallback((function(e){o(e),localStorage.setItem(h,JSON.stringify(e))}),[]),m=n.a.useCallback((function(e,t){O(Object(d.a)(Object(d.a)({},l),{},Object(u.a)({},e,t)))}),[l,O]),v=Object(c.useCallback)((function(e){O(Object(d.a)(Object(d.a)({},l),{},Object(u.a)({},e,[])))}),[O,l]);return n.a.useEffect((function(){var e=function(){var e=Object(_.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(b,1e3);case 2:window.addEventListener("storage",b);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){window.removeEventListener("storage",b)}}),[b]),n.a.useMemo((function(){return{visitsByAllDoctors:l,loading:a,deleteVisitsByDoctorId:v,updateVisitsByOneDoctor:m,updateVisitsByAllDoctors:O}}),[l,a,O,m,v])}();return Object(b.jsx)(N.Provider,{value:a,children:t})}function D(){var e=Object(l.g)().id,t=C().updateVisitsByAllDoctors,a=Object(l.f)(),r=Object(c.useState)({}),s=Object(j.a)(r,2),v=s[0],x=s[1],p=Object(c.useCallback)((function(e,t){x((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(u.a)({},e,t))}))}),[x]),_=n.a.useCallback((function(c){c.preventDefault();var n=localStorage.getItem(h),r=JSON.parse(n)||{},s=r[e]||[],i=s.map((function(e){return e.id})),l=0===i.length?-1:Math.max.apply(Math,Object(o.a)(i)),j=Object(d.a)({id:l+1},v),b=Object(d.a)(Object(d.a)({},r),{},Object(u.a)({},e,[].concat(Object(o.a)(s),[j])));t(b),a(m.DOCTOR.replace(":id",e))}),[a,v,e,t]);return Object(b.jsxs)("div",{className:"visitDetailsForm",children:[Object(b.jsxs)("form",{className:"visitDetailsForm__form",onSubmit:_,children:[Object(b.jsx)(O,{name:"receiptDate",value:v.receiptDate,onChange:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u043c\u0430",type:"date",autoFocus:!0}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"doctorName",value:v.doctorName,onChange:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u0432\u0440\u0430\u0447\u0430"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"addressClinic",value:v.addressClinic,onChange:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043a\u043b\u0438\u043d\u0438\u043a\u0438"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"clinicName",value:v.clinicName,onChange:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u043d\u0438\u043a\u0438"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"analyzes",value:v.analyzes,onChange:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u044b"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"diagnosis",value:v.diagnosis,onChange:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0438\u0430\u0433\u043d\u043e\u0437"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"treatment",value:v.treatment,onChange:p,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u0435\u0447\u0435\u043d\u0438\u0435"}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"visitDetailsForm__saveButton",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(b.jsx)(i.b,{to:m.DOCTOR.replace(":id",e),children:Object(b.jsx)(f,{className:"visitDetailsForm__backButton",children:"\ud83e\udc14"})})]})}a(30);var S=n.a.createContext({});function w(){var e=Object(c.useContext)(S);if(void 0===e)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430");return e}function k(e){var t=e.children,a=function(){var e=n.a.useState(!0),t=Object(j.a)(e,2),a=t[0],r=t[1],s=n.a.useState([]),i=Object(j.a)(s,2),l=i[0],u=i[1],d=n.a.useCallback((function(){var e=localStorage.getItem(v);try{u(JSON.parse(e)||[])}catch(t){u([])}r(!1)}),[]),b=Object(c.useCallback)((function(e){u((function(t){var a=t.filter((function(t){return t.id!==e.id}));if(a.length===t.length){var c=a.reduce((function(e,t){return e>t.id?e:t.id}),0);e.id=c+1}var n=[].concat(Object(o.a)(a),[e]);return localStorage.setItem(v,JSON.stringify(n)),n}))}),[]),O=n.a.useCallback((function(e){var t=localStorage.getItem(h),a=JSON.parse(t)||{},c=Object.assign(a);delete c[e],u((function(t){var a=t.filter((function(t){return t.id!==e}));return localStorage.setItem(v,JSON.stringify(a)),localStorage.setItem(h,JSON.stringify(c)),a}))}),[]);return n.a.useEffect((function(){var e=function(){var e=Object(_.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(d,1e3);case 2:window.addEventListener("storage",d);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){window.removeEventListener("storage",d)}}),[d]),n.a.useMemo((function(){return{doctors:l,loading:a,updateDoctor:b,deleteDoctor:O,setDoctors:u}}),[l,a,b,O])}();return Object(b.jsx)(S.Provider,{value:a,children:t})}function F(){var e=w(),t=e.doctors,a=e.updateDoctor,c=Object(l.f)(),r=n.a.useState(""),s=Object(j.a)(r,2),o=s[0],u=s[1],d=n.a.useState(""),O=Object(j.a)(d,2),v=O[0],h=O[1],x=n.a.useCallback((function(e){h(e.target.value),u("")}),[]),p=n.a.useCallback((function(e){e.preventDefault();var n=function(e,t){return e?t.some((function(t){return t.value.toLowerCase()===e.toLowerCase()}))?"*\u041e\u0448\u0438\u0431\u043a\u0430! \u0422\u0430\u043a\u043e\u0439 \u0432\u0440\u0430\u0447 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":""===e.trim()?"*\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0440\u0430\u0447\u0430":"":"*\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}(v,t);n?u(n):(a({value:v}),c(m.DOCTORS))}),[v,c,a,t]);return Object(b.jsx)("div",{className:"doctorForm",children:Object(b.jsxs)("form",{className:"doctorForm__form",onSubmit:p,children:[Object(b.jsx)("input",{value:v,onChange:x,className:"doctorForm__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0430\u0447\u0430",name:"doctorName",autoFocus:!0}),Object(b.jsx)("div",{className:"doctorForm__message",children:o}),Object(b.jsx)("button",{className:"doctorForm__saveButton",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)("div",{className:"doctorForm__back",children:Object(b.jsx)(i.b,{to:m.DOCTORS,children:Object(b.jsx)(f,{color:"primary",className:"back__fab",children:"\ud83e\udc14"})})})]})})}a(31),a(32);var R,T,I,E,M=["title","titleId"];function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},B.apply(this,arguments)}function P(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function V(e,t){var a=e.title,n=e.titleId,r=P(e,M);return c.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-trash-2",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,R||(R=c.createElement("polyline",{points:"3 6 5 6 21 6"})),T||(T=c.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),I||(I=c.createElement("line",{x1:10,y1:11,x2:10,y2:17})),E||(E=c.createElement("line",{x1:14,y1:11,x2:14,y2:17})))}var J=c.forwardRef(V);a.p;function L(e){var t=e.visit,a=e.onDelete,c=t.receiptDate,n=t.doctorName,r=t.clinicName,s=t.analyzes,i=t.diagnosis,l=t.treatment,o=t.addressClinic;return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsxs)("div",{className:"card__value",children:[Object(b.jsx)("h4",{className:"value__title",children:" \u0414\u0430\u0442\u0430 \u043f\u0440\u0438\u0451\u043c\u0430:"}),Object(b.jsx)("p",{className:"value__text",children:c}),Object(b.jsx)("h4",{className:"value__title",children:" \u0424\u0418\u041e \u0432\u0440\u0430\u0447\u0430:"}),Object(b.jsx)("p",{className:"value__text",children:n}),Object(b.jsx)("h4",{className:"value__title",children:" \u0410\u0434\u0440\u0435\u0441 \u043a\u043b\u0438\u043d\u0438\u043a\u0438:"}),Object(b.jsxs)("p",{className:"value__text",children:[" ",o]}),Object(b.jsx)("h4",{className:"value__title",children:" \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u043d\u0438\u043a\u0438:"}),Object(b.jsx)("p",{className:"value__text",children:r}),Object(b.jsx)("h4",{className:"value__title",children:" \u0410\u043d\u0430\u043b\u0438\u0437\u044b:"}),Object(b.jsx)("p",{className:"value__text",children:s}),Object(b.jsx)("h4",{className:"value__title",children:" \u0414\u0438\u0430\u0433\u043d\u043e\u0437:"}),Object(b.jsx)("p",{className:"value__text",children:i}),Object(b.jsx)("h4",{className:"value__title",children:" \u041b\u0435\u0447\u0435\u043d\u0438\u0435:"}),Object(b.jsx)("p",{className:"value__text",children:l})]}),Object(b.jsx)("div",{className:"card__delete",onClick:function(e){e.stopPropagation(),a(t.id)},children:Object(b.jsx)(J,{className:"delete__icon"})})]})}function A(){var e=Object(l.g)().id,t=function(e){var t=C().visitsByAllDoctors;return Object(c.useMemo)((function(){return t[e]||[]}),[e,t])}(e),a=function(){var e=Object(l.g)().id,t=w().doctors;return Object(c.useMemo)((function(){return t.find((function(t){return t.id===+e}))}),[e,t])}(),r=C().updateVisitsByOneDoctor,s=n.a.useCallback((function(a){var c=t.filter((function(e){return e.id!==a}));r(e,c)}),[t,r,e]);return Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"SummaryCards",children:[Object(b.jsx)("div",{className:"SummaryCards__header",children:null===a||void 0===a?void 0:a.value.toUpperCase()}),Object(b.jsx)("div",{className:"SummaryCards__cards",children:t.map((function(e){return Object(b.jsx)(L,{visit:e,onDelete:s},e.id)}))}),Object(b.jsxs)("div",{className:"SummaryCards__fab",children:[Object(b.jsx)(i.b,{to:m.DOCTORS,children:Object(b.jsx)(f,{color:"primary","aria-label":"add",className:"fab__back",children:"\ud83e\udc14"})}),Object(b.jsx)(i.b,{to:m.DOCTOR_VISIT_FORM.replace(":id",a.id),className:"fab__add",children:Object(b.jsx)(f,{color:"primary","aria-label":"add",children:"+"})})]})]})})}a(33);function z(){var e=Object(l.f)();return Object(c.useEffect)((function(){e(m.DOCTORS)}),[e]),Object(b.jsx)("main",{style:{padding:"1rem"},children:Object(b.jsx)("p",{children:"There's nothing here!"})})}var q=a(42),H=a(41);a(34);function U(e){var t=e.doctor,a=e.onClick,c=e.onDelete;return Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"doctorItem",onClick:function(){return a(t.id)},children:[Object(b.jsx)("div",{className:"doctorItem__value",children:t.value}),Object(b.jsx)("div",{className:"doctorItem__delete",onClick:function(e){e.stopPropagation(),setTimeout(c(t.id),5e3)},children:Object(b.jsx)(J,{className:"delete__icon"})})]})})}a(35);function W(){var e=w(),t=e.doctors,a=e.deleteDoctor,r=C().deleteVisitsByDoctorId,s=Object(c.useCallback)((function(e){a(e),r(e)}),[r,a]),o=Object(l.f)(),u=n.a.useCallback((function(e){return o(m.DOCTOR.replace(":id",e))}),[o]);return t.length?Object(b.jsx)("div",{className:"doctors",children:Object(b.jsxs)("div",{className:"doctors__wrapper",children:[Object(b.jsx)("div",{className:"list__title",children:" \u041e\u0431\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0440\u0430\u0447\u0435\u0439"}),Object(b.jsx)(q.a,{component:"div",className:"doctors__list",children:t.map((function(e){return Object(b.jsx)(H.a,{timeout:500,classNames:"list__doctor",children:Object(b.jsx)(U,{onClick:u,doctor:e,onDelete:s},e.value)},e.id)}))}),Object(b.jsx)("div",{className:"doctors__fab",children:Object(b.jsx)(i.b,{to:m.DOCTOR_FORM,children:Object(b.jsx)(f,{color:"primary","aria-label":"add",children:"+"})})})]})}):Object(b.jsxs)("div",{className:"welcomePage",children:[Object(b.jsxs)("div",{className:"welcomePage__welcome",children:[" \u0414\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c! ",Object(b.jsx)("br",{})," \u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0440\u0430\u0447\u0435\u0439"]}),Object(b.jsx)("div",{className:"welcomePage__fab",children:Object(b.jsx)(i.b,{to:m.DOCTOR_FORM,children:Object(b.jsx)(f,{color:"primary","aria-label":"add",children:"+"})})})]})}a(38);var G=function(e){var t=e.children,a=C().loading;return w().loading||a?Object(b.jsx)("div",{className:"loading__wrapper",children:Object(b.jsx)("div",{className:"loading__outside",children:Object(b.jsx)("div",{className:"loading__inside"})})}):t};var K=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(i.a,{children:Object(b.jsx)(k,{children:Object(b.jsx)(y,{children:Object(b.jsx)(G,{children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{exact:!0,path:m.DOCTOR_VISIT_FORM,element:Object(b.jsx)(D,{})}),Object(b.jsx)(l.a,{exact:!0,path:m.DOCTOR,element:Object(b.jsx)(A,{})}),Object(b.jsx)(l.a,{exact:!0,path:m.DOCTOR_FORM,element:Object(b.jsx)(F,{})}),Object(b.jsx)(l.a,{exact:!0,path:m.DOCTORS,element:Object(b.jsx)(W,{})}),Object(b.jsx)(l.a,{path:"*",element:Object(b.jsx)(z,{})})]})})})})})})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,43)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(K,{})}),document.getElementById("root")),Q()}},[[39,1,2]]]);
//# sourceMappingURL=main.00816616.chunk.js.map