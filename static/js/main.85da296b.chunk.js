(this["webpackJsonpmedical-notes"]=this["webpackJsonpmedical-notes"]||[]).push([[0],{19:function(e,t,c){},21:function(e,t,c){},22:function(e,t,c){},23:function(e,t,c){},25:function(e,t,c){},26:function(e,t,c){},27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(14),s=c.n(r),i=(c(19),c(5)),o=c(2),l=c(11),d=c(10),j=c(8),u=c(3),b=c(0);function O(e){var t=e.autoFocus,c=e.name,n=e.placeholder,r=e.value,s=void 0===r?"":r,i=e.onChange,o=e.type,l=Object(a.useCallback)((function(e){return i(c,e.target.value)}),[i,c]);return Object(b.jsx)("input",{value:s,onChange:l,name:c,className:"visitDetailsForm__input",placeholder:n,type:o,required:!0,autoFocus:t})}c(21);var m={DOCTORS:"/doctors",DOCTOR:"/doctor/:id",DOCTOR_FORM:"/doctor/form",DOCTOR_VISIT_FORM:"/doctor/:id/visit-form"},h="doctors",f="details";c(22);function v(e){var t=e.className,c=e.children;return Object(b.jsx)("button",{color:"primary","aria-label":"add",className:"fab ".concat(t||""),children:c})}function x(){var e=Object(o.g)().id,t=Object(o.f)(),c=Object(a.useState)({}),r=Object(u.a)(c,2),s=r[0],h=r[1],x=Object(a.useCallback)((function(e,t){h((function(c){return Object(j.a)(Object(j.a)({},c),{},Object(d.a)({},e,t))}))}),[h]),p=n.a.useCallback((function(c){c.preventDefault();var a=localStorage.getItem(f),n=JSON.parse(a)||{},r=n[e]||[],i=r.map((function(e){return e.id})),o=0===i.length?-1:Math.max.apply(Math,Object(l.a)(i)),u=Object(j.a)({id:o+1},s),b=Object(j.a)(Object(j.a)({},n),{},Object(d.a)({},e,[].concat(Object(l.a)(r),[u])));localStorage.setItem(f,JSON.stringify(b)),t(m.DOCTOR.replace(":id",e))}),[t,s,e]);return Object(b.jsxs)("div",{className:"visitDetailsForm",children:[Object(b.jsxs)("form",{className:"visitDetailsForm__form",onSubmit:p,children:[Object(b.jsx)(O,{name:"receiptDate",value:s.receiptDate,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u043c\u0430",type:"date",autoFocus:!0}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"doctorName",value:s.doctorName,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u0432\u0440\u0430\u0447\u0430"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"addressClinic",value:s.addressClinic,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043a\u043b\u0438\u043d\u0438\u043a\u0438"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"clinicName",value:s.clinicName,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u043d\u0438\u043a\u0438"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"analyzes",value:s.analyzes,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u044b"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"diagnosis",value:s.diagnosis,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0438\u0430\u0433\u043d\u043e\u0437"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"treatment",value:s.treatment,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u0435\u0447\u0435\u043d\u0438\u0435"}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"visitDetailsForm__saveButton",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(b.jsx)(i.b,{to:m.DOCTOR.replace(":id",e),children:Object(b.jsx)(v,{className:"visitDetailsForm__backButton",children:"\ud83e\udc14"})})]})}c(23);var p=c(7),C=c.n(p),g=c(12);function _(e,t){return new Promise((function(c,a){setTimeout((function(){try{var t=e();c(t)}catch(n){a(n)}}),t)}))}var N=n.a.createContext({});function D(){var e=Object(a.useContext)(N);if(void 0===e)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430");return e}function S(e){var t=e.children,c=function(){var e=n.a.useState(!0),t=Object(u.a)(e,2),c=t[0],r=t[1],s=n.a.useState([]),i=Object(u.a)(s,2),o=i[0],d=i[1],j=n.a.useCallback((function(){var e=localStorage.getItem(h);try{d(JSON.parse(e)||[])}catch(t){d([])}r(!1)}),[]),b=Object(a.useCallback)((function(e){d((function(t){var c=t.filter((function(t){return t.id!==e.id}));if(c.length===t.length){var a=c.reduce((function(e,t){return e>t.id?e:t.id}),0);e.id=a+1}var n=[].concat(Object(l.a)(c),[e]);return localStorage.setItem(h,JSON.stringify(n)),n}))}),[]),O=n.a.useCallback((function(e){d((function(t){var c=t.filter((function(t){return t.id!==e}));return localStorage.setItem(h,JSON.stringify(c)),c}))}),[]);return n.a.useEffect((function(){var e=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(j,1e3);case 2:window.addEventListener("storage",j);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){window.removeEventListener("storage",j)}}),[j]),n.a.useMemo((function(){return{doctors:o,loading:c,updateDoctor:b,deleteDoctor:O,setDoctors:d}}),[o,c,b,O])}();return Object(b.jsx)(N.Provider,{value:c,children:t})}function y(){var e=D(),t=e.doctors,c=e.updateDoctor,a=Object(o.f)(),r=n.a.useState(""),s=Object(u.a)(r,2),l=s[0],d=s[1],j=n.a.useState(""),O=Object(u.a)(j,2),h=O[0],f=O[1],x=n.a.useCallback((function(e){f(e.target.value),d("")}),[]),p=n.a.useCallback((function(e){e.preventDefault();var n=function(e,t){return e?t.some((function(t){return t.value.toLowerCase()===e.toLowerCase()}))?"*\u041e\u0448\u0438\u0431\u043a\u0430! \u0422\u0430\u043a\u043e\u0439 \u0432\u0440\u0430\u0447 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":""===e.trim()?"*\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0440\u0430\u0447\u0430":"":"*\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}(h,t);n?d(n):(c({value:h}),a(m.DOCTORS))}),[h,a,c,t]);return Object(b.jsx)("div",{className:"doctorForm",children:Object(b.jsxs)("form",{className:"doctorForm__form",onSubmit:p,children:[Object(b.jsx)("input",{value:h,onChange:x,className:"doctorForm__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0430\u0447\u0430",name:"doctorName"}),Object(b.jsx)("div",{className:"doctorForm__message",children:l}),Object(b.jsx)("button",{className:"doctorForm__saveButton",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)("div",{className:"doctorForm__back",children:Object(b.jsx)(i.b,{to:m.DOCTORS,children:Object(b.jsx)(v,{color:"primary","aria-label":"add",className:"back__fab",children:"\ud83e\udc14"})})})]})})}c(25),c(26);function k(e){var t=e.visit,c=e.onDelete,a=t.receiptDate,n=t.doctorName,r=t.clinicName,s=t.analyzes,i=t.diagnosis,o=t.treatment,l=t.addressClinic;return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsxs)("div",{className:"card__value",children:[Object(b.jsx)("h4",{children:" \u0414\u0430\u0442\u0430 \u043f\u0440\u0438\u0451\u043c\u0430:"}),Object(b.jsx)("p",{children:a}),Object(b.jsx)("h4",{children:" \u0424\u0418\u041e \u0432\u0440\u0430\u0447\u0430:"}),Object(b.jsx)("p",{children:n}),Object(b.jsx)("h4",{children:" \u0410\u0434\u0440\u0435\u0441 \u043a\u043b\u0438\u043d\u0438\u043a\u0438:"}),Object(b.jsxs)("p",{children:[" ",l]}),Object(b.jsx)("h4",{children:" \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u043d\u0438\u043a\u0438:"}),Object(b.jsx)("p",{children:r}),Object(b.jsx)("h4",{children:" \u0410\u043d\u0430\u043b\u0438\u0437\u044b:"}),Object(b.jsx)("p",{children:s}),Object(b.jsx)("h4",{children:" \u0414\u0438\u0430\u0433\u043d\u043e\u0437:"}),Object(b.jsx)("p",{children:i}),Object(b.jsx)("h4",{children:" \u041b\u0435\u0447\u0435\u043d\u0438\u0435:"}),Object(b.jsx)("p",{children:o})]}),Object(b.jsx)("div",{className:"card__delete",onClick:function(e){e.stopPropagation(),c(t.id)},children:"\ud83d\uddd1"})]})}var w=n.a.createContext({});function T(){var e=Object(a.useContext)(w);if(void 0===e)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430");return e}function F(e){var t=e.children,c=function(){var e=n.a.useState(!0),t=Object(u.a)(e,2),c=t[0],a=t[1],r=n.a.useState({}),s=Object(u.a)(r,2),i=s[0],o=s[1],l=n.a.useCallback((function(){var e=localStorage.getItem(f);try{o(JSON.parse(e)||{})}catch(t){o({})}a(!1)}),[]),d=n.a.useCallback((function(e){o(e),localStorage.setItem(localStorage.DETAILS,JSON.stringify(e))}),[]);return n.a.useEffect((function(){var e=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(l,1e3);case 2:window.addEventListener("storage",l);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){window.removeEventListener("storage",l)}}),[l]),n.a.useMemo((function(){return{visitsByAllDoctors:i,loading:c,updateVisitsByAllDoctors:d}}),[i,c,d])}();return Object(b.jsx)(w.Provider,{value:c,children:t})}function R(){var e=function(e){var t=T().visitsByAllDoctors;return Object(a.useMemo)((function(){return t[e]||[]}),[e,t])}(Object(o.g)().id),t=function(){var e=Object(o.g)().id,t=D().doctors;return Object(a.useMemo)((function(){return t.find((function(t){return t.id===+e}))}),[e,t])}(),c=n.a.useCallback((function(){return console.log("deleted!")}),[]);return Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"SummaryCards",children:[Object(b.jsx)("div",{className:"SummaryCards__header",children:null===t||void 0===t?void 0:t.value.toUpperCase()}),Object(b.jsx)("div",{className:"SummaryCards__cards",children:e.map((function(e){return Object(b.jsx)(k,{visit:e,onDelete:c},e.id)}))}),Object(b.jsxs)("div",{className:"SummaryCards__fab",children:[Object(b.jsx)(i.b,{to:m.DOCTORS,children:Object(b.jsx)(v,{color:"primary","aria-label":"add",className:"fab__back",children:"\ud83e\udc14"})}),Object(b.jsx)(i.b,{to:m.DOCTOR_VISIT_FORM.replace(":id",t.id),className:"fab__add",children:Object(b.jsx)(v,{color:"primary","aria-label":"add",children:"+"})})]})]})})}c(27);function I(){var e=Object(o.f)();return Object(a.useEffect)((function(){e(m.DOCTORS)}),[e]),Object(b.jsx)("main",{style:{padding:"1rem"},children:Object(b.jsx)("p",{children:"There's nothing here!"})})}c(28);function M(e){var t=e.doctor,c=e.onClick,a=e.onDelete;return Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"doctorItem",onClick:function(){return c(t.id)},children:[Object(b.jsx)("div",{className:"doctorItem__value",children:t.value}),Object(b.jsx)("div",{className:"doctorItem__delete",onClick:function(e){e.stopPropagation(),a(t.id)},children:"\ud83d\uddd1"})]})})}c(29);function E(){var e=D(),t=e.doctors,c=e.deleteDoctor,a=Object(o.f)(),r=n.a.useCallback((function(e){return a(m.DOCTOR.replace(":id",e))}),[a]);return Object(b.jsx)("div",{className:"Doctors",children:Object(b.jsxs)("div",{className:"Doctors__wrapper",children:[!t.length&&Object(b.jsxs)("div",{className:"Doctors__welcome",children:[" \u0414\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c! ",Object(b.jsx)("br",{})," \u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0440\u0430\u0447\u0435\u0439"]}),Object(b.jsx)("div",{className:"Doctors__list",children:t.map((function(e){return Object(b.jsx)(M,{onClick:r,doctor:e,onDelete:c},e.value)}))}),Object(b.jsx)("div",{className:"Doctors__fab",children:Object(b.jsx)(i.b,{to:m.DOCTOR_FORM,children:Object(b.jsx)(v,{color:"primary","aria-label":"add",children:"+"})})})]})})}c(30);var J=function(e){var t=e.children,c=T().loading;return D().loading||c?Object(b.jsx)("div",{className:"loading",children:Object(b.jsx)("div",{className:"loading__inside"})}):t};var L=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(i.a,{children:Object(b.jsx)(S,{children:Object(b.jsx)(F,{children:Object(b.jsx)(J,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{path:m.DOCTOR_VISIT_FORM,element:Object(b.jsx)(x,{})}),Object(b.jsx)(o.a,{path:m.DOCTOR,element:Object(b.jsx)(R,{})}),Object(b.jsx)(o.a,{path:m.DOCTOR_FORM,element:Object(b.jsx)(y,{})}),Object(b.jsx)(o.a,{path:m.DOCTORS,element:Object(b.jsx)(E,{})}),Object(b.jsx)(o.a,{path:"*",element:Object(b.jsx)(I,{})})]})})})})})})},B=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,32)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(L,{})}),document.getElementById("root")),B()}},[[31,1,2]]]);
//# sourceMappingURL=main.85da296b.chunk.js.map