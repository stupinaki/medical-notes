(this["webpackJsonpmedical-notes"]=this["webpackJsonpmedical-notes"]||[]).push([[0],{25:function(e,t,c){},27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(10),i=c.n(r),s=(c(25),c(4)),o=c(2),l=c(16),d=c(15),j=c(13),u=c(3),b=c(1);function O(e){var t=e.autoFocus,c=e.name,n=e.placeholder,r=e.value,i=void 0===r?"":r,s=e.onChange,o=e.type,l=Object(a.useCallback)((function(e){return s(c,e.target.value)}),[s,c]);return Object(b.jsx)("input",{value:i,onChange:l,name:c,className:"visitDetailsForm__input",placeholder:n,type:o,required:!0,autoFocus:t})}c(27);var m={DOCTORS:"/doctors",DOCTOR:"/doctor/:id",DOCTOR_FORM:"/doctor/form",DOCTOR_VISIT_FORM:"/doctor/:id/visit-form"},h="doctors",f="details";c(28);function v(e){var t=e.className,c=e.children;return Object(b.jsx)("button",{color:"primary","aria-label":"add",className:"fab ".concat(t||""),children:c})}function x(){var e=Object(o.g)().id,t=Object(o.f)(),c=Object(a.useState)({}),r=Object(u.a)(c,2),i=r[0],h=r[1],x=Object(a.useCallback)((function(e,t){h((function(c){return Object(j.a)(Object(j.a)({},c),{},Object(d.a)({},e,t))}))}),[h]),p=n.a.useCallback((function(c){c.preventDefault();var a=localStorage.getItem(f),n=JSON.parse(a)||{},r=n[e]||[],s=r.map((function(e){return e.id})),o=0===s.length?-1:Math.max.apply(Math,Object(l.a)(s)),u=Object(j.a)({id:o+1},i),b=Object(j.a)(Object(j.a)({},n),{},Object(d.a)({},e,[].concat(Object(l.a)(r),[u])));localStorage.setItem(f,JSON.stringify(b)),t(m.DOCTOR.replace(":id",e))}),[t,i,e]);return Object(b.jsxs)("div",{className:"visitDetailsForm",children:[Object(b.jsxs)("form",{className:"visitDetailsForm__form",onSubmit:p,children:[Object(b.jsx)(O,{name:"receiptDate",value:i.receiptDate,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u043c\u0430",type:"date",autoFocus:!0}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"doctorName",value:i.doctorName,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u0432\u0440\u0430\u0447\u0430"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"addressClinic",value:i.addressClinic,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043a\u043b\u0438\u043d\u0438\u043a\u0438"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"clinicName",value:i.clinicName,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u043d\u0438\u043a\u0438"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"analyzes",value:i.analyzes,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u044b"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"diagnosis",value:i.diagnosis,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0438\u0430\u0433\u043d\u043e\u0437"}),Object(b.jsx)("br",{}),Object(b.jsx)(O,{name:"treatment",value:i.treatment,onChange:x,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u0435\u0447\u0435\u043d\u0438\u0435"}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"visitDetailsForm__saveButton",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(b.jsx)(s.b,{to:m.DOCTOR.replace(":id",e),children:Object(b.jsx)(v,{className:"visitDetailsForm__backButton",children:"\ud83e\udc14"})})]})}c(29);var p=c(11),g=c.n(p),_=c(17);function C(e,t){return new Promise((function(c,a){setTimeout((function(){try{var t=e();c(t)}catch(n){a(n)}}),t)}))}var N=n.a.createContext({});function y(){var e=Object(a.useContext)(N);if(void 0===e)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430");return e}function D(e){var t=e.children,c=function(){var e=n.a.useState(!0),t=Object(u.a)(e,2),c=t[0],r=t[1],i=n.a.useState([]),s=Object(u.a)(i,2),o=s[0],d=s[1],j=n.a.useCallback((function(){var e=localStorage.getItem(h);try{d(JSON.parse(e)||[])}catch(t){d([])}r(!1)}),[]),b=Object(a.useCallback)((function(e){d((function(t){var c=t.filter((function(t){return t.id!==e.id}));if(c.length===t.length){var a=c.reduce((function(e,t){return e>t.id?e:t.id}),0);e.id=a+1}var n=[].concat(Object(l.a)(c),[e]);return localStorage.setItem(h,JSON.stringify(n)),n}))}),[]),O=n.a.useCallback((function(e){d((function(t){var c=t.filter((function(t){return t.id!==e}));return localStorage.setItem(h,JSON.stringify(c)),c}))}),[]);return n.a.useEffect((function(){var e=function(){var e=Object(_.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(j,1e3);case 2:window.addEventListener("storage",j);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){window.removeEventListener("storage",j)}}),[j]),n.a.useMemo((function(){return{doctors:o,loading:c,updateDoctor:b,deleteDoctor:O,setDoctors:d}}),[o,c,b,O])}();return Object(b.jsx)(N.Provider,{value:c,children:t})}function S(){var e=y(),t=e.doctors,c=e.updateDoctor,a=Object(o.f)(),r=n.a.useState(""),i=Object(u.a)(r,2),l=i[0],d=i[1],j=n.a.useState(""),O=Object(u.a)(j,2),h=O[0],f=O[1],x=n.a.useCallback((function(e){f(e.target.value),d("")}),[]),p=n.a.useCallback((function(e){e.preventDefault();var n=function(e,t){return e?t.some((function(t){return t.value.toLowerCase()===e.toLowerCase()}))?"*\u041e\u0448\u0438\u0431\u043a\u0430! \u0422\u0430\u043a\u043e\u0439 \u0432\u0440\u0430\u0447 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":""===e.trim()?"*\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0440\u0430\u0447\u0430":"":"*\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}(h,t);n?d(n):(c({value:h}),a(m.DOCTORS))}),[h,a,c,t]);return Object(b.jsx)("div",{className:"doctorForm",children:Object(b.jsxs)("form",{className:"doctorForm__form",onSubmit:p,children:[Object(b.jsx)("input",{value:h,onChange:x,className:"doctorForm__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0430\u0447\u0430",name:"doctorName",autoFocus:!0}),Object(b.jsx)("div",{className:"doctorForm__message",children:l}),Object(b.jsx)("button",{className:"doctorForm__saveButton",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)("div",{className:"doctorForm__back",children:Object(b.jsx)(s.b,{to:m.DOCTORS,children:Object(b.jsx)(v,{color:"primary",className:"back__fab",children:"\ud83e\udc14"})})})]})})}c(31),c(32);var w,k,T,F,R=["title","titleId"];function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a])}return e},I.apply(this,arguments)}function E(e,t){if(null==e)return{};var c,a,n=function(e,t){if(null==e)return{};var c,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)c=r[a],t.indexOf(c)>=0||(n[c]=e[c]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)c=r[a],t.indexOf(c)>=0||Object.prototype.propertyIsEnumerable.call(e,c)&&(n[c]=e[c])}return n}function M(e,t){var c=e.title,n=e.titleId,r=E(e,R);return a.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-trash-2",ref:t,"aria-labelledby":n},r),c?a.createElement("title",{id:n},c):null,w||(w=a.createElement("polyline",{points:"3 6 5 6 21 6"})),k||(k=a.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),T||(T=a.createElement("line",{x1:10,y1:11,x2:10,y2:17})),F||(F=a.createElement("line",{x1:14,y1:11,x2:14,y2:17})))}var P=a.forwardRef(M);c.p;function L(e){var t=e.visit,c=e.onDelete,a=t.receiptDate,n=t.doctorName,r=t.clinicName,i=t.analyzes,s=t.diagnosis,o=t.treatment,l=t.addressClinic;return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsxs)("div",{className:"card__value",children:[Object(b.jsx)("h4",{children:" \u0414\u0430\u0442\u0430 \u043f\u0440\u0438\u0451\u043c\u0430:"}),Object(b.jsx)("p",{children:a}),Object(b.jsx)("h4",{children:" \u0424\u0418\u041e \u0432\u0440\u0430\u0447\u0430:"}),Object(b.jsx)("p",{children:n}),Object(b.jsx)("h4",{children:" \u0410\u0434\u0440\u0435\u0441 \u043a\u043b\u0438\u043d\u0438\u043a\u0438:"}),Object(b.jsxs)("p",{children:[" ",l]}),Object(b.jsx)("h4",{children:" \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u043d\u0438\u043a\u0438:"}),Object(b.jsx)("p",{children:r}),Object(b.jsx)("h4",{children:" \u0410\u043d\u0430\u043b\u0438\u0437\u044b:"}),Object(b.jsx)("p",{children:i}),Object(b.jsx)("h4",{children:" \u0414\u0438\u0430\u0433\u043d\u043e\u0437:"}),Object(b.jsx)("p",{children:s}),Object(b.jsx)("h4",{children:" \u041b\u0435\u0447\u0435\u043d\u0438\u0435:"}),Object(b.jsx)("p",{children:o})]}),Object(b.jsx)("div",{className:"card__delete",onClick:function(e){e.stopPropagation(),c(t.id)},children:Object(b.jsx)(P,{className:"delete__icon"})})]})}var B=n.a.createContext({});function J(){var e=Object(a.useContext)(B);if(void 0===e)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430");return e}function V(e){var t=e.children,c=function(){var e=n.a.useState(!0),t=Object(u.a)(e,2),c=t[0],a=t[1],r=n.a.useState({}),i=Object(u.a)(r,2),s=i[0],o=i[1],l=n.a.useCallback((function(){var e=localStorage.getItem(f);try{o(JSON.parse(e)||{})}catch(t){o({})}a(!1)}),[]),d=n.a.useCallback((function(e){o(e),localStorage.setItem(localStorage.DETAILS,JSON.stringify(e))}),[]);return n.a.useEffect((function(){var e=function(){var e=Object(_.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(l,1e3);case 2:window.addEventListener("storage",l);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){window.removeEventListener("storage",l)}}),[l]),n.a.useMemo((function(){return{visitsByAllDoctors:s,loading:c,updateVisitsByAllDoctors:d}}),[s,c,d])}();return Object(b.jsx)(B.Provider,{value:c,children:t})}function A(){var e=function(e){var t=J().visitsByAllDoctors;return Object(a.useMemo)((function(){return t[e]||[]}),[e,t])}(Object(o.g)().id),t=function(){var e=Object(o.g)().id,t=y().doctors;return Object(a.useMemo)((function(){return t.find((function(t){return t.id===+e}))}),[e,t])}(),c=n.a.useCallback((function(){return console.log("deleted!")}),[]);return Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"SummaryCards",children:[Object(b.jsx)("div",{className:"SummaryCards__header",children:null===t||void 0===t?void 0:t.value.toUpperCase()}),Object(b.jsx)("div",{className:"SummaryCards__cards",children:e.map((function(e){return Object(b.jsx)(L,{visit:e,onDelete:c},e.id)}))}),Object(b.jsxs)("div",{className:"SummaryCards__fab",children:[Object(b.jsx)(s.b,{to:m.DOCTORS,children:Object(b.jsx)(v,{color:"primary","aria-label":"add",className:"fab__back",children:"\ud83e\udc14"})}),Object(b.jsx)(s.b,{to:m.DOCTOR_VISIT_FORM.replace(":id",t.id),className:"fab__add",children:Object(b.jsx)(v,{color:"primary","aria-label":"add",children:"+"})})]})]})})}c(33);function z(){var e=Object(o.f)();return Object(a.useEffect)((function(){e(m.DOCTORS)}),[e]),Object(b.jsx)("main",{style:{padding:"1rem"},children:Object(b.jsx)("p",{children:"There's nothing here!"})})}c(34);function q(e){var t=e.doctor,c=e.onClick,a=e.onDelete;return Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"doctorItem",onClick:function(){return c(t.id)},children:[Object(b.jsx)("div",{className:"doctorItem__value",children:t.value}),Object(b.jsx)("div",{className:"doctorItem__delete",onClick:function(e){e.stopPropagation(),setTimeout(a(t.id),5e3)},children:Object(b.jsx)(P,{className:"delete__icon"})})]})})}c(35);var H=c(42),U=c(41);function W(){var e=y(),t=e.doctors,c=e.deleteDoctor,a=Object(o.f)(),r=n.a.useCallback((function(e){return a(m.DOCTOR.replace(":id",e))}),[a]);return t.length?Object(b.jsx)("div",{className:"doctors",children:Object(b.jsxs)("div",{className:"doctors__wrapper",children:[Object(b.jsx)("div",{className:"list__title",children:" \u041e\u0431\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0440\u0430\u0447\u0435\u0439"}),Object(b.jsx)(H.a,{component:"div",className:"doctors__list",children:t.map((function(e){return Object(b.jsx)(U.a,{timeout:500,classNames:"list__doctor",children:Object(b.jsx)(q,{onClick:r,doctor:e,onDelete:c},e.value)},e.id)}))}),Object(b.jsx)("div",{className:"doctors__fab",children:Object(b.jsx)(s.b,{to:m.DOCTOR_FORM,children:Object(b.jsx)(v,{color:"primary","aria-label":"add",children:"+"})})})]})}):Object(b.jsxs)("div",{className:"welcomePage",children:[!t.length&&Object(b.jsxs)("div",{className:"welcomePage__welcome",children:[" \u0414\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c! ",Object(b.jsx)("br",{})," \u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0440\u0430\u0447\u0435\u0439"]}),Object(b.jsx)("div",{className:"welcomePage__fab",children:Object(b.jsx)(s.b,{to:m.DOCTOR_FORM,children:Object(b.jsx)(v,{color:"primary","aria-label":"add",children:"+"})})})]})}c(38);var G=function(e){var t=e.children,c=J().loading;return y().loading||c?Object(b.jsx)("div",{className:"loading__wrapper",children:Object(b.jsx)("div",{className:"loading__outside",children:Object(b.jsx)("div",{className:"loading__inside"})})}):t};var K=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(s.a,{children:Object(b.jsx)(D,{children:Object(b.jsx)(V,{children:Object(b.jsx)(G,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:m.DOCTOR_VISIT_FORM,element:Object(b.jsx)(x,{})}),Object(b.jsx)(o.a,{exact:!0,path:m.DOCTOR,element:Object(b.jsx)(A,{})}),Object(b.jsx)(o.a,{exact:!0,path:m.DOCTOR_FORM,element:Object(b.jsx)(S,{})}),Object(b.jsx)(o.a,{exact:!0,path:m.DOCTORS,element:Object(b.jsx)(W,{})}),Object(b.jsx)(o.a,{path:"*",element:Object(b.jsx)(z,{})})]})})})})})})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,43)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))};i.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(K,{})}),document.getElementById("root")),Q()}},[[39,1,2]]]);
//# sourceMappingURL=main.210d562a.chunk.js.map